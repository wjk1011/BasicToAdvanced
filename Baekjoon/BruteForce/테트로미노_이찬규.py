# ì •ë‹µ

N, M = list(map(int, input().split(' ')))
arr = [list(map(int, input().split(' '))) for _ in range(N)]
shape = [[(0, 0), (0, 1), (0, 2), (0, 3)],
         [(0, 0), (1, 0), (2, 0), (3, 0)],
         [(0, 0), (0, 1), (1, 0), (1, 1)],
         [(0, 0), (1, 0), (2, 0), (2, 1)],
         [(0, 0), (0, 1), (0, 2), (-1, 2)],
         [(0, 0), (0, 1), (1, 1), (2, 1)],
         [(0, 0), (0, 1), (0, 2), (1, 0)],
         [(0, 0), (0, 1), (-1, 1), (-2, 1)],
         [(0, 0), (0, 1), (0, 2), (1, 2)],
         [(0, 0), (0, 1), (1, 0), (2, 0)],
         [(0, 0), (1, 0), (1, 1), (1, 2)],
         [(0, 0), (1, 0), (1, 1), (2, 1)],
         [(0, 0), (0, 1), (-1, 1), (-1, 2)],
         [(0, 0), (0, 1), (1, 0), (-1, 1)],
         [(0, 0), (0, 1), (1, 1), (1, 2)],
         [(0, 0), (0, 1), (-1, 1), (0, 2)],
         [(0, 0), (-1, 0), (1, 0), (0, 1)],
         [(0, 0), (0, 1), (0, 2), (1, 1)],
         [(0, 0), (0, 1), (-1, 1), (1, 1)],
         ]

answer = 0
for x, c in enumerate(arr):
    for y, r in enumerate(c):

        for s1, s2, s3, s4 in shape:
            x1, y1 = s1
            x2, y2 = s2
            x3, y3 = s3
            x4, y4 = s4

            if 0 <= x+x1 < N and 0 <= x+x2 < N and 0 <= x+x3 < N and 0 <= x+x4 < N:
                if 0 <= y+y1 < M and 0 <= y+y2 < M and 0 <= y+y3 < M and 0 <= y+y4 < M:
                    answer = max(answer, arr[x+x1][y+y1] + arr[x+x2][y+y2] + arr[x+x3][y+y3] + arr[x+x4][y+y4])
print(answer)
